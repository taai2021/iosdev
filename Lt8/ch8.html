<!DOCTYPE html>
<html lang="en"> 
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
    <title>行動商務與系統發展</title> 
    <link href="css/bootstrap-4.4.1.css" rel="stylesheet">
    <link rel=stylesheet type="text/css" href="css/style.css">
    <!--script src="js/custom.js"></script>-->
  </head>
<body>

<!--navigation **************************************************************************************************** navigation -->
<div >
  <nav id="van" class="navbar navbar-expand-lg navbar-dark nav-nobg fixed-top" role="navigation" >
   
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul style="margin-left: 50px;" class="navbar-nav mr-auto navbar-left">
        <li class="nav-item dropdown"><!-- ch1 -->
          <a class="nav-link dropdown-toggle nav-nobg" href="../Lt1/ch1.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true"  aria-expanded="false" style="border-radius: 20px; color: orangered;">
          1</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt1/ch1.html">第1章 簡介</a>  
            <a class="dropdown-item" href="../Lt1/ch1.html#no1">上課相關規定</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no2">1.開發 iOS APP 需要準備什麼?</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no3">2 MAC作業系統基本操作</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no4">3 建立APPLE ID，使用自己的APPLE ID建立MAC帳號和環境</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no5">4 練習去Apple store安裝壓縮軟體</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no6">5 熟悉Xcode環境簡介</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no7">6 Hello World</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no8">7 問題和練習</a>
            
          </div>
        </li>
        <li class="nav-item dropdown"><!-- CFP -->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          2</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt2/ch2.html">第2章 Swift快跑</a>             
            <a class="dropdown-item" href="../Lt2/ch2.html#no1">1. 基本語法</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no2">2. tuples</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no3">3. optionals</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no4">4. 條件式和迴圈</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no5">5. Function</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no6">6. 類別</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no7">7. 閉包</a>
          </div>
        </li>
        
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          3</a>              
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt3/ch3.html">第3章 app基礎練習</a>         
            <a class="dropdown-item" href="../Lt3/ch3.html#no1">1. 熟悉XCODE各個面板部位和操作</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no2">2. TEXT元件和屬性設定</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no3">3. VStack+HStack+ZStack+Spacer()</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no4">4. Button、@State 《從變數傳值到元件》</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no5">5. Textfield、$ 《變數和元件雙向傳值》</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no6">6. subview和@Binding</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no7">7. 習題</a>
          </div>
        </li>

        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          4</a>               
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt4/ch4.html">第4章  Button進階</a>      
            <a class="dropdown-item" href="../Lt4/ch4.html#no1">1. 新增viewcontroller及其類別並建立連結</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no2">1. Image的使用</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no2">2. Button《image》</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no3">3. ICON《SF Symbols》</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no4">4. Label《文字+ICON》</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no5">5. Button《Label》</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no6">6. Button-動畫</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no7">7. 浮動按鈕與Alert</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no8">8. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          5</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt5/ch5.html#no0">第5章 UITableview Controller的使用</a>  
            <a class="dropdown-item" href="../Lt5/ch5.html#no1">1. 準備好UITableviewcontroller，設定起始頁面</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no2">2. 建立一段程式碼，然後和UITableviewcontroller產生關聯</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no3">3. 為自訂cell建立類別並且和自訂cell產生關聯</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no4">4. 設定cell</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no5">5. 在CustomTableViewCell類別建立自訂元件的變數</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no6">6. 提供資料來源給自訂的CustomTableViewCell</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no7">7. 讓cell的影像由方形變成圓形</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no8">8. Label如何摺行</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no9">9. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          6</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt6/ch6.html">第6章 UITableview的事件處理</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no1">1. UI<span style="color: red;">TableView</span>DataSource和UI<span style="color: red;">TableView</span>Delegate的再解釋</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no2">2. 點選事件-使用UI<span style="color: red;">Alert</span>Controller進行互動</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no3">3. 點選事件-使用閉包來處理UI<span style="color: red;">Alert</span>Action</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no4">4. 點選事件-使用UI<span style="color: red;">TableViewCell</span>Accessory來標示cell</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no5">5. 滑動事件-使用<span style="color: red;">editingStyle</span>方法幫tableview建立刪除功能</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no6">6. 滑動事件-使用<span style="color: red;">editActions</span>方法幫tableview建立自訂功能</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no7">7. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          7</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt7/ch7.html">第7章 頁面轉移(segue)與Apple Map</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no1">1. 一點物件導向概念</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no2">2. 使用segue轉移頁面的概念</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no3">3. 使用prepare方法來傳送資料</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no4">4. 按鈕發動的segue和view發動的segue</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no5">5. show和 Present modally的區別</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no6">6. 地圖的使用</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no7">7. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          8</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt8/ch8.html">第8章 會員認證機制與Gesture</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no1">1. 樣板Tabbar的使用</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no2">2 練習：登入&登出</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no3">3 練習-實現自動登入</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no4">4 作業</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no5">5 補充資料 iOS常用的手勢</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          9</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt9/ch9.html">第9章 使用JSON格式讀取伺服器資料</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no1">1. 甚麼是json</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no2">2. 練習一和二的說明</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no3">3. 練習的環境準備</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no4">4. 練習一、從一個本地端的JSON file讀取資料放到那三個Label中</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no5">5. 如何使用PHP語言寫伺服器程式，當客戶端呼叫這個程式就會傳回JSON格式資料</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no6">6. 練習二、從遠端透過HTPP協定讀取JSON資料放到那三個Label中</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no7">7. 多執行緒的概念，以及有些動作只能在main執行緒做，應該怎麼解決?</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no8">8. 作業 1</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no9">9. 練習三、下載遠端圖檔</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no10">10. 練習四、如何傳送帳密到伺服器中驗證</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no11">11. 作業 2</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no12">12. 補充資料 會員帳密管理的伺服器程式碼（php+apache+mysql）</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no13">13. 補充資料 CLGeocoder - 經緯度和地址 互換</a>        
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          10<a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt10/ch10.html">第10章 CocoaPods & Firebase的使用</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          11</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt11/ch11.html">第11章 使用UIImagePickerController拍照和相簿存取</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          12</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt12/ch12.html"> 第12章 擴增專案功能，讓會員可以拍照上傳以及評論</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          13</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt13/ch13.html">第13章 統整專案，進行優化，開放會員新增餐廳</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>
  <p style=" position: fixed; top: 0; right: 0;z-index: 5000; color:chocolate;margin-right: 5px;  border-radius: 5px;
  padding: 0px 3px;">
  第8章 會員認證機制與Gesture
</p>
  <p style=" font-size:0.8em; position: fixed; bottom: 0; right: 0;z-index: 5000; color:white;
  font-weight: bold;margin-right: 5px; background-color: chocolate; border-radius: 5px;
  padding: 0px 3px;"><a style="color: aliceblue; font-size: 1.5em; " href="../index.html">回首頁</a></p>
</div>
 
<!--below is the content**************************************************************************************below is the content -->
  <div  style="margin-top: 80px;">
     
    <div style="margin: auto; width: 96%; text-align: left; border-bottom: 1px solid darkgrey; "> 
      <section id="no1"><h2>1. 樣板Tabbar的使用</h2>
       
        
          <p>iOS提供幾個現成版面，可以節省建置的時間。</p>
          <p>在這個單元我們主要是要練習TabBAR，他是一個很常見的頁面樣板，，icon在下方，只要點選ICON就可以顯示該頁面</p>
          
          <p><img src="images/ch84.png" alt="" width="969" height="789"></p>
          
          
          <p>這個單元要把餐廳專案套用到Tabbar成為其中的一個頁面</p>
          <p>然後另外加兩個頁面</p>
          <p>登入畫面和登出畫面</p>
          <p>登入的功能</p>
          <p>我們先使用程式內預設的假帳密做出登入功能，成功進入餐廳列表畫面，失敗出現紅色提失敗醒文字</p>
          <p>最後再加上已登入的功能，如果已登入未登出，那末下次開APP就會直接進入餐廳列表畫面，而不是登入畫面</p>
              
                  
          <h3>把餐廳專案套用Tabbar樣版</h3>
    
          <p>拉進去tabbed bar</p>
          <p><img src="images/ch85.png" alt="" width="430" height="625"></p>
          <p>&nbsp;</p>
          <p>1 把啟動畫面移到tabbed bar</p>
          <p>2 接下來從tabbed bar拖曳到餐廳列表</p>
          <p>&nbsp;</p>
          <p><img src="images/temp3.png" width="882" height="651" alt=""/></p>
          <p>&nbsp;</p>
          <p>3 選擇view controllers</p>
          <p><img src="images/temp1.png" width="901" height="665" alt=""/></p>
          <p>4 檢查是否出現第三個icon</p>
          <p><img src="images/temp2.png" width="901" height="665" alt=""/></p>
    
      <h3>替換餐廳專案的icon和文字</h3>
      <p><a href="https://iconarchive.com/tag/food">IconArchive</a>這個網站可以找到大量的icon，每個icon都有各種尺寸可以下載，這邊我建議下載32pixel以下的比較適合。</p>
      <p><img  src="images/ch87.png" alt="" width="100%"></p>
      
    </section> 
    <section id="no2"><h2>2 練習：登入&登出</h2>

      <h3>練習的環境準備</h3>
      <p>我們不要直接做在餐廳專案中，先用一個空白專案練習登入動作</p>
      <p>按下面說明建立練習的環境</p>
      <ol  >
        <li style="background-color: rgb(210, 230, 97);">開一個新專案</li>
        <p></p>
        <li style="background-color: rgb(210, 230, 97);">開兩個viewcontroller 指定他為起始畫面為登入畫面</li>          
          <p>第一是<font color="#FF0105">登入畫面</font>  對應類別 login.swift</p>
          <p>第二是<font color="#FF0105">系統畫面</font>  對應類別 logout.swift</p>

        <li style="background-color: rgb(210, 230, 97);">元件設計</li>        
          <ul>
            <li>登入畫面</li>
                Label　→　紅色帳密錯誤　→　拉去login.swift建立IBOutlet  取名<font color="#FF0105">fail</font><br>
                帳密的輸入格　→　拉去login.swift建立IBOutlet  分別取名<font color="#FF0105">acc</font>和<font color="#FF0105">pwd</font><br>
                一個登入按鈕　→　拉去login.swift建立IBAction ，等等用來寫登入的程式<br>
                一個switchb讓使用者自己決定下次開APP要不要自動登入　→　加一個IBOutlet名稱是<font color="#FF0105">rem</font><br>       
            <li>系統畫面</li>
                LABEL的文字顯示 《系統》<br>
                登出按鈕讓使用者跳回登入畫面　→　拉去logout.swift建立IBAction ，等等用來寫登出的程式
            <li>segue設定</li>
                登入畫面到系統畫面用present Modally的segue連接 ，等等登入成功可以跳過去，取名叫做login<br>
                系統畫面到登入畫面用present Modally的segue連接 ，等等登出可以跳回去登入畫面，取名叫做logout
          </ul>
          <p><img src="images/sdfgh.png" width="872" height="689" alt=""/></p>
        <li style="background-color: rgb(210, 230, 97);">先暫時弄一個預設的假帳密</li>        
          <p>加上假帳密，先做假登入，好了再到遠端撈真帳密</p>
          <p>在log.swift的類別加上兩個成員變數</p>
          <p> var myAccount=&quot;abc&quot;</p>
          <p>var myPassword=&quot;123&quot;</p>

      </ol>
      <h3>練習-登入、登出動作的程式</h3>
          <ol>
            <li>在登入畫面的button的程式中驗證 帳密</li>
            <li>如果正確就進入系統畫面</li>
            <li>如果帳密錯誤 就顯示上面紅色帳密錯誤提示</li>
          </ol>
      <p>在登入按鈕的IBAction中</p>
      <XMP style="background-color: black;color: white;">
if acc.text == myAccount && pwd.text == myPassword {
    self.performSegue(withIdentifier:"login",sender:self)
}else{
    fail.isHidden=false;
}
      </XMP>
      <p>在登出按鈕的IBAction中，登出就跳回登入畫面</p>
      <XMP style="background-color: black;color: white;">
self.performSegue(withIdentifier:"logout",sender:self)
      </XMP>
      </section> 
      <section id="no3"><h2>3 練習-實現自動登入</h2>
   
      <h3>一個view的生命週期</h3>
      <p>後面會用到這個背景知識，所以先介紹一下</p>
      <p>下圖是一個view被啟動之後到結束的一個生命周期</p>
      <img src="images/0814OT_06_02.jpg"/>
      <p><br>
        像<font color="#FF0105">ViewDidLoad()</font>，我們就用過了，他是在view啟動然後LOAD進來之後，<br>
        這時候才會有所謂的view，所以ViewDidLoad()是view的第一支執行的程式，<br>
        所以我們常會把一些預設的動作放在這邊</p>
      <p>而<font color="#FF0105">viewDidAppear</font>則是當view已經顯示，並且<font color="#FF0105">被其他view認識了</font></p>
      <p>因此</p>
      <p>viewDidLoad　→　的時候有自己view的元件，所以你可以在這邊指定元件的初始值</p>
      <p>viewDidAppear　→　view已經知道其他view，所以可以segue到其他view去</p>
      <p></p>
      <p></p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <hr>
      <h3>練習-使用UserDefaults記住登入狀態</h3>
      <p>剛才的switch要拉IBOutlet<br>
        因為你要在程式中判斷她要不要記住已登入，</p>
      <p>這邊我設定的名稱是rem</p>
      <p><font color="#FF0105">rem.isOn如果是true，表示swictch已經打開為on，就是要自動登入</font></p>
      <p>另外，要記住已登入，應該記在哪邊呢?</p>
      <p>在iOS有一個機制，可以讓每個app可以寫一些東西上去<br>
        在關閉之後，仍被保存住，下次開啟APP時那些資料仍然還在</p>
      <p>她就是UserDefaults，下面是會用到的方法</p>
        <ul>
          <li>寫入UserDefaults</li>
              <p>UserDefaults.standard.set(uuid, forKey: &quot;usid&quot;)<br>
                寫入一組資料key和value，這行程式《寫入key為usid，value為uuid》</p>
          <li>自UserDefaults讀出資料</li>
              <p> x=UserDefaults.standard.string(forKey: &quot;usid&quot;)<br>
                去取回key值為usid的value，這行《x應該會得到uuid，如果沒有這個key直則x=nil》</p>
          <li>自UserDefaults移除資料</li>
              <p>UserDefaults.standard.removeObject(forKey: &quot;usid&quot;)<br>
                移除key值為usid</p>
        </ul>
      <p>&nbsp;</p>
      <p>所以剛剛登入程式的邏輯必須修改一下</p>
      <p>如果帳密驗證正確，在跳到系統畫面之前，必須先檢查switch有沒有on</p>
      <p>如果on，就在UserDefaults寫入一組值，下次開啟APP時檢查這個值，如果有，就跳過登入畫面直接進入系統畫面</p>
      <p>&nbsp;</p>
      <p>登入畫面的按鈕</p>
      <p>寫登入驗證程式如下</p>
      <p><br>
        <XMP style="background-color: black;color: white;">
          
if acc.text == myAccount && pwd.text == myPassword {
  if rem.isOn{  
    let uuid = "apple"
    UserDefaults.standard.set(uuid, forKey: "usid")  
  }  
  self.performSegue(withIdentifier:"login",sender:self)
  
}else{
  fail.isHidden=false;  
}
  </XMP>
      <p>&nbsp;</p>
      <p>另外在登出時，要去UserDefaults把這個值刪除，下次登入就會進入登入畫面</p>
      <p>系統畫面button加action，加入下面程式，登出後跳登入畫面<br>
      </p>
      <p>UserDefaults.standard.removeObject(forKey: &quot;usid&quot;)</p>
      <p>self.performSegue(withIdentifier:&quot;logout&quot;,sender:self)</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>說明</p>
      <p>let uuid = &quot;apple&quot;<br>
        UserDefaults.standard.set(uuid, forKey: &quot;usid&quot;)</p>
      <p>是加{&quot;usid&quot; : &quot;&quot;apple&quot;}到UserDefaults</p>
      <p>而</p>
      <p>UserDefaults.standard.removeObject(forKey: &quot;usid&quot;)</p>
      <p>是移除</p>
      <p>&nbsp;</p>
      <hr>
        <h3>練習-實現自動登入</h3>
        <p>我們在後面章節再使用真實伺服器認證，現在仍然使用本地假認證<br>接下來要做自動登入 檢視UserDefaults是否有登入資訊，有的話直接進入系統，否則進入登入畫面</p>
        <p>先有一個問題，在哪邊檢查是否已登入的UserDefaults資訊?</p>
        <p>如果是在登入畫面檢查，那麼就算能自動登入，也會讓使用者先看到登入畫面，這樣不夠專業</p>
        <p>所以我們新增一個空白的頁面當作APP的啟動頁面</p>
        <p>，在這個view去檢查自動登入資訊來決定要進入登入畫面或者系統畫面，如下圖</p>
        <p><img src="images/azxc.png" width="642" height="677" alt=""/></p>
        <p>下一個問題，要在那個view的甚麼地方寫這段程式?</p>
        <p>讓app一啟動就開這個view，這個view一開就自動去執行自東登入判斷程式?</p>
        <p>然後要先回顧一下剛剛教過的view的生命週期</p>
        <p>viewDidLoad-------- 的時候有自己view的元件，所以你可以在這邊指定元件的初始值</p>
        <p>viewDidAppear------view已經知道其他view，所以可以segue到其他view去</p>
        <p>有這兩個可能的選擇，我們想一下</p>
        <p>不管自動登入的判斷結果如何，他終就必須要進行segue，</p>
        <p>在viewDidLoad中，view剛啟動根本不認識其他的view，所以你要他跳到登入的那個view他就會出現錯誤，說他不認識</p>
        <p><font color="#FF0105">所以自動登入的程式必須寫在viewDidAppear</font>-</p>
        <p>&nbsp;</p>
        <p>************************************************************</p>
        <p>如果上面的說明聽懂了，接下來開始實作</p>
        <p>先調整好畫面如下</p>
        <p>最後加入的viewcontroler 叫做判斷畫面<br>
          ，加cocoa touch file，設成起始畫面，目前總共3個view，關係如下，</p>
        
        <p>segue按照下圖建立命名，全部都使用present Modally</p>
        <img src="images/azxc.png" width="642" height="677" alt=""/>
      <div>
      
        <p>&nbsp;</p>
        <p>在判斷畫面中的<font color="#FF0004">viewDidAppear</font>加入下面程式</p>
        <p>先檢查有沒有usid的key值</p>
        <p>有 就跳系統畫面</p>
        <p>沒有就跳登入畫面</p>
      </div>
      <XMP style="background-color: black;color: white;">
override func viewDidAppear(_ animated : Bool) {

  let userid = UserDefaults.standard.string(forKey: "usid")
    //判断UserDefaults中是否已经存在
    if(userid != nil){
      self.performSegue(withIdentifier: "seg2", sender: self)
    }else{
      self.performSegue(withIdentifier: "seg1", sender: self)
    }
}
      </xmp>
      </section>
      <section id="no4"><h2>4 作業</h2>
      <p>最後 請將登入功能做到餐廳專案</p>
      <p>施作的時候，不要一次弄完所有功能</p>
      <p>要和我上課的次序一樣</p>
      <p>密碼先用假的，只做登入</p>
      <p>成功之後</p>
      <p></p>
      <p>再加設記住登入的部分</p>
      <p>再實現自動登入</p>
      <p>在做專題或者以後除去做開發系統工作的時候</p>
      <p>對於不熟的東西</p>
      <p>要像這樣做，把工作切成一團一團，由簡到難</p>
      <p>先做簡單的在慢慢加上其他複雜功能</p>
      <p>每做完一個部分就先驗證，OK再繼續下一個</p>
      <p>這樣開發系統才能很乾淨減少bug，偵錯也容易</p>
      <p>做這個登入功能時不要一次全加上去，發現不行，摸一摸搞到一團亂，再對著老師甜甜地笑，讓老師幫你debug，這樣我會翻臉!!!</p>
       </section>
      
      <section  id="no5"><h2 >5 補充資料 iOS常用的手勢</h2>
        
        <ol>
          <li><a href="#ko1">輕敲 tap</a></li>
          <li><a href="#ko2">縮放 pinch</a></li>
          <li><a href="#ko3">旋轉 rotation</a></li>
          <li><a href="#ko4">揮擊 swipe</a></li>
          <li><a href="#ko5">拖曳 pan</a></li>
          <li><a href="#ko6">長按 long pres</a></li>
        </ol>
        <div><h3 id="ko1">輕敲 tap </h3>
          <p> 開新專案 single view</p>
          <p>拖曳tap gesture recognizer </p>
          <p>設定<font color="#FF0004">touches屬性=3</font> 三根手指頭</p>
          <p><font color="#FF0004">taps=1</font> 要敲一次</p>
          <p><img src="images/cha001.png" alt="" width="645" height="320"></p>
          <p>加入程式碼到那個IBAction當用3跟手指頭輕敲一次，會出現一個alert</p>
          <XMP style="background-color: black;color: white;">
            // 建立警示對話方塊
            let alertController = UIAlertController(title: "確認視窗", message: "確定要結束應用程式嗎？", preferredStyle: .alert)
            // 建立按鈕
            let cancelAction = UIAlertAction(title: "是", style: .cancel,handler:{
                  action->Void in
                  print("您按下 \(action.title!) 按鈕!")
                }            
            );
            let sureAction = UIAlertAction(title: "否", style: .default,handler:{
                action->Void in
                print("您按下 \(action.title!) 按鈕!")
                }
            );
            // 按鈕加入對話方塊
            alertController.addAction(cancelAction)
            alertController.addAction(sureAction)
            // 顯示對話方塊
            self.present(alertController, animated: true, completion: nil) 
          </XMP>
        </div>
        <div><h3 id="ko2">縮放 pinch  </h3>    
          <p>開新專案<br>
            拖曳image view 和pinch gesture 進去 分別設定IBOutlet IBAction<br>
            找一張圖放到專案 拉進去image view,<br>
            把imageview的User interaction Enabled打開
          </p>      
            <img src="images/cha002.png" alt="" width="955" height="497">
            <XMP style="background-color: black;color: white;">
import UIKit

class ViewController: UIViewController {
@IBOutlet weak var img: UIImageView!

@IBAction func pinch3(_ sender: UIPinchGestureRecognizer) {
    if sender.state == UIGestureRecognizer.began{
          // 這邊程式碼在開始縮放之前會被執行
    } else if sender.state == UIGestureRecognizer.changed{
          // 將圖片放大或縮小的時候會執行這的程式碼
          let frame=img.frame // 取得圖片框
          let s=sender.scale // 縮放比例
          let w=img.frame.width // 目前圖片寬度
          let h=img.frame.height // 目前圖片高度
          print("scale=\(s)")
          if s*w > 100 && s*w < 400 {
                // 重設圖片框
                img.frame=CGRect(x: frame.origin.x, y: frame.origin.y, width: s*w, height: s*h)
          }
    } else if sender.state == UIGestureRecognizer.ended{
          // 這邊程式碼在結束縮放之後會被執行
          //
    }

}
            </XMP>
        </div>
        <div><h3 id="ko3">旋轉 rotation  </h3>   
            <p>開新專案，拖曳image view 和rotation gesture 進去 分別設定IBOutlet IBAction
</p> 
<XMP style="background-color: black;color: white;">
 

import UIKit

class ViewController: UIViewController {
@IBOutlet weak var img: UIImageView!

@IBAction func rot(_ sender: UIRotationGestureRecognizer) {
        let rad:CGFloat = sender.rotation
        // 計算角度
        let angle:Double = Double(rad) * 180 / Double.pi
        // 圖片旋轉
        img.transform = CGAffineTransform(rotationAngle: rad)
        print("旋轉角度=\(angle)")

}

          </XMP>       
        </div>
        <div><h3 id="ko4">揮擊 swipe  </h3>     
          <p>每一個swipe 只控制一個方向 所以 要拉四個</p>
          <p>swipe 方向</p>
          <p>touches 幾根手指</p>
          <p><img src="images/cha003.png" alt="" width="1088" height="566"></p>
          <p>&nbsp;</p>
          <p>&nbsp;</p>     
        </div>
        <div><h3 id="ko5">拖曳 pan  </h3>                       
          <p>touches min 最少幾根手指拖曳</p>
          <p>touches max 最多幾根手指拖曳</p>
          <p><img src="images/cha004.png" alt="" width="842" height="493"></p>  
          <XMP style="background-color: black;color: white;">
            import UIKit

            class ViewController: UIViewController {
            @IBOutlet weak var img: UIImageView!
            @IBAction func panm(_ sender: UIPanGestureRecognizer) {
                  for i in 0 ..< sender.numberOfTouches {
                  let point:CGPoint = sender.location(ofTouch: i, in: sender.view)
                  print("第 \(i+1) 手指位置：\(NSStringFromCGPoint(point))")
                  }

            }
          </XMP>     
        </div>
        <div><h3 id="ko6">長按 long pres  </h3>    
          <img src="images/cha005.png" alt="" width="1093" height="417">      
          <XMP style="background-color: black;color: white;">
            @IBAction func longPress(_ sender: UILongPressGestureRecognizer) {

                  if sender.state == UIGestureRecognizerState.began{
                      // 建立警示對話方塊
                      let alertController = UIAlertController(title: "確認視窗", message: "確定要結束應用程式嗎？", preferredStyle: .alert)
                      // 建立按鈕
                      let cancelAction = UIAlertAction(title: "是", style: .cancel,
                      handler:{
                      action->Void in
                      print("您按下 \(action.title!) 按鈕!")
                      }
                      );
                  let sureAction = UIAlertAction(title: "否", style: .default,
                      handler:{
                      action->Void in
                      print("您按下 \(action.title!) 按鈕!")
                      }
                      );
                  // 按鈕加入對話方塊
                  alertController.addAction(cancelAction)
                  alertController.addAction(sureAction)
                  // 顯示對話方塊
                  self.present(alertController, animated: true, completion: nil)
                  }
            }
          </XMP>
        </div>
      </section>


    
    </div>
 
    
  </div>  
<!--footer *****************************************************************************************************************footer  -->
    
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery-3.4.1.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap-4.4.1.js"></script>
</body>
</html>
