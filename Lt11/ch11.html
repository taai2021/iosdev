<!DOCTYPE html>
<html lang="en"> 
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
    <title>行動商務與系統發展</title> 
    <link href="css/bootstrap-4.4.1.css" rel="stylesheet">
    <link rel=stylesheet type="text/css" href="css/style.css">
    <!--script src="js/custom.js"></script>-->
  </head>
<body>

<!--navigation **************************************************************************************************** navigation -->
<div >
  <nav id="van" class="navbar navbar-expand-lg navbar-dark nav-nobg fixed-top" role="navigation" >
   
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul style="margin-left: 50px;" class="navbar-nav mr-auto navbar-left">
        <li class="nav-item dropdown"><!-- ch1 -->
          <a class="nav-link dropdown-toggle nav-nobg" href="../Lt1/ch1.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true"  aria-expanded="false" style="border-radius: 20px; color: orangered;">
          1</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt1/ch1.html">第1章 簡介</a>  
            <a class="dropdown-item" href="../Lt1/ch1.html#no1">上課相關規定</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no2">1.開發 iOS APP 需要準備什麼?</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no3">2 MAC作業系統基本操作</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no4">3 建立APPLE ID，使用自己的APPLE ID建立MAC帳號和環境</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no5">4 練習去Apple store安裝壓縮軟體</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no6">5 熟悉Xcode環境簡介</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no7">6 Hello World</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no8">7 問題和練習</a>
            
          </div>
        </li>
        <li class="nav-item dropdown"><!-- CFP -->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          2</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt2/ch2.html">第2章 Swift快跑</a>             
            <a class="dropdown-item" href="../Lt2/ch2.html#no1">1. 基本語法</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no2">2. tuples</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no3">3. optionals</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no4">4. 條件式和迴圈</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no5">5. Function</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no6">6. 類別</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no7">7. 閉包</a>
          </div>
        </li>
        
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          3</a>              
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt3/ch3.html">第3章 app基礎練習</a>         
            <a class="dropdown-item" href="../Lt3/ch3.html#no1">1. 熟悉XCODE各個面板部位和操作</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no2">2. TEXT元件和屬性設定</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no3">3. VStack+HStack+ZStack+Spacer()</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no4">4. Button、@State 《從變數傳值到元件》</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no5">5. Textfield、$ 《變數和元件雙向傳值》</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no6">6. subview和@Binding</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no7">7. 習題</a>
          </div>
        </li>

        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          4</a>               
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt4/ch4.html">第4章  Button進階</a>      
            <a class="dropdown-item" href="../Lt4/ch4.html#no1">1. 新增viewcontroller及其類別並建立連結</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no2">1. Image的使用</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no2">2. Button《image》</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no3">3. ICON《SF Symbols》</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no4">4. Label《文字+ICON》</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no5">5. Button《Label》</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no6">6. Button-動畫</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no7">7. 浮動按鈕與Alert</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no8">8. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          5</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt5/ch5.html#no0">第5章 UITableview Controller的使用</a>  
            <a class="dropdown-item" href="../Lt5/ch5.html#no1">1. 準備好UITableviewcontroller，設定起始頁面</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no2">2. 建立一段程式碼，然後和UITableviewcontroller產生關聯</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no3">3. 為自訂cell建立類別並且和自訂cell產生關聯</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no4">4. 設定cell</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no5">5. 在CustomTableViewCell類別建立自訂元件的變數</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no6">6. 提供資料來源給自訂的CustomTableViewCell</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no7">7. 讓cell的影像由方形變成圓形</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no8">8. Label如何摺行</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no9">9. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          6</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt6/ch6.html">第6章 UITableview的事件處理</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no1">1. UI<span style="color: red;">TableView</span>DataSource和UI<span style="color: red;">TableView</span>Delegate的再解釋</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no2">2. 點選事件-使用UI<span style="color: red;">Alert</span>Controller進行互動</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no3">3. 點選事件-使用閉包來處理UI<span style="color: red;">Alert</span>Action</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no4">4. 點選事件-使用UI<span style="color: red;">TableViewCell</span>Accessory來標示cell</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no5">5. 滑動事件-使用<span style="color: red;">editingStyle</span>方法幫tableview建立刪除功能</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no6">6. 滑動事件-使用<span style="color: red;">editActions</span>方法幫tableview建立自訂功能</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no7">7. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          7</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt7/ch7.html">第7章 頁面轉移(segue)與Apple Map</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no1">1. 一點物件導向概念</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no2">2. 使用segue轉移頁面的概念</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no3">3. 使用prepare方法來傳送資料</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no4">4. 按鈕發動的segue和view發動的segue</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no5">5. show和 Present modally的區別</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no6">6. 地圖的使用</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no7">7. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          8</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt8/ch8.html">第8章 會員認證機制與Gesture</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no1">1. 樣板Tabbar的使用</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no2">2 練習：登入&登出</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no3">3 練習-實現自動登入</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no4">4 作業</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no5">5 補充資料 iOS常用的手勢</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          9</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt9/ch9.html">第9章 使用JSON格式讀取伺服器資料</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no1">1. 甚麼是json</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no2">2. 練習一和二的說明</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no3">3. 練習的環境準備</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no4">4. 練習一、從一個本地端的JSON file讀取資料放到那三個Label中</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no5">5. 如何使用PHP語言寫伺服器程式，當客戶端呼叫這個程式就會傳回JSON格式資料</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no6">6. 練習二、從遠端透過HTPP協定讀取JSON資料放到那三個Label中</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no7">7. 多執行緒的概念，以及有些動作只能在main執行緒做，應該怎麼解決?</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no8">8. 作業 1</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no9">9. 練習三、下載遠端圖檔</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no10">10. 練習四、如何傳送帳密到伺服器中驗證</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no11">11. 作業 2</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no12">12. 補充資料 會員帳密管理的伺服器程式碼（php+apache+mysql）</a>
            <a class="dropdown-item" href="../Lt9/ch9.html#no13">13. 補充資料 CLGeocoder - 經緯度和地址 互換</a>        
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          10<a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt10/ch10.html">第10章 CocoaPods & Firebase的使用</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          11</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt11/ch11.html">第11章 使用UIImagePickerController拍照和相簿存取</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          12</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt12/ch12.html"> 第12章 擴增專案功能，讓會員可以拍照上傳以及評論</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          13</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt13/ch13.html">第13章 統整專案，進行優化，開放會員新增餐廳</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>
  <p style=" position: fixed; top: 0; right: 0;z-index: 5000; color:chocolate;margin-right: 5px;  border-radius: 5px;
  padding: 0px 3px;">
  第11章 使用UIImagePickerController拍照和相簿存取
</p>
  <p style=" font-size:0.8em; position: fixed; bottom: 0; right: 0;z-index: 5000; color:white;
  font-weight: bold;margin-right: 5px; background-color: chocolate; border-radius: 5px;
  padding: 0px 3px;"><a style="color: aliceblue; font-size: 1.5em; " href="../index.html">回首頁</a></p>
</div>
  
<!--below is the content**************************************************************************************below is the content -->
  <div  style="margin-top: 80px;">
    
    <div style="margin: auto; width: 96%; text-align: left; border-bottom: 1px solid darkgrey; "> 
    <p>這個單元介紹UIImagePickerController和ARKIT</p>
    <ul>
      <li>UIImagePickerController</li>
       功能分成
       <ol>
         <li>自相機取得影像放入imageview</li>
         <li>自相簿取得影像放入imageview</li>
         <li>從imageview把影像存入相簿</li>
       </ol>
      <li>ARKIT</li>
      這邊順便介紹一點iOS的AR使用方式
      <ol>
        <li>把一個3D的立方體放進去AR空間內</li>
        <li>偵測一張圖，當偵測到圖，就顯示一個預設的AR模型</li>
      </ol>
    </ul>
    </div>

    <div style="margin: auto; width: 96%; text-align: left; border-bottom: 1px solid darkgrey; "> 
      <section  id="no1"><h2 >自相機取得影像放入imageview</h2>
      
        <p>下面是拍照的控制步驟，其中1和2是編輯.plist文件,添加兩個key-value，打開相機和相冊的存取權限</p>
        <div><h3>建立步驟</h3>              
          <ol>
          <li> 申請相機許可權：</li>
          <XMP>
              <key>NSCameraUsageDescription</key>
              <string>This app will use camera </string>
          </XMP>      
          <li>申請相冊許可權</li>
          <XMP>
              <key>NSPhotoLibraryUsageDescription</key>
              <string> You can select photos to attach to reports.</string>
          </XMP>          
          <li>拉一個imageview元件到一個viewController，取名為imagePicked</li>
          <li>控制項繼承下面兩個協定UINavigationControllerDelegate ，UIImagePickerControllerDelegate </li>
          <p>
            
          </p>
          實現方法：class yourController:..., UINavigationControllerDelegate, UIImagePickerControllerDelegate  <br>{...  }<br>
          imagePicker在拍完照片之後，會啟動imagePickerController這個程式，把照片帶過去，並且停止相機，<br>
          所以必須要加這個協定，imagePicker才能指定delegate到這個類別。
          <li>宣告一個成員變數為相機控制項</li>
          var imagePicker = UIImagePickerController()
          <li>指定imagepicker的delegate為自己本身類別</li>
          在viewdidload加入imagePicker.delegate = self
          <li>加一個拍照按鈕，用來啟動相機</li>
          做一個按鈕的IBAction，當按下按鈕時執行下面程式，啟動相機<br>
          @IBAction func openCameraButton (_ sender: UIButton) <br>                 
          <span class=r2">imagePicker.sourceType = .camera   <br>   </span>
          <span class=r2">present(imagePicker, animated: true, completion: nil)  <br></span>
          }
          <li>拍照之後利用imagePickerController取回照片 </li>
          在imagepicker取得影像後，會執行下列函式，<br>
          停止相機<br>
          自info取出image放入imageview<br>
          private func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject]) {<br>
                  imagePicker.dismiss(animated: true, completion: nil)<br>
                  imagePicked.image = info[UIImagePickerControllerOriginalImage] as? UIImage<br>
          }
          
          
          </ol>
          
        </div>
      </section>
      <section  id="no1"><h2 >自相簿取得影像放入imageview</h2>
      
        <div><h3>上課方式</h3>
          <p>
           
          </p>
        </div>
           
      </section>
      <section  id="no1"><h2 >從imageview把影像存入相簿</h2>
      
        <div><h3>上課方式</h3>
          <p>
           
          </p>
        </div>
           
      </section>
      <section  id="no1"><h2 >把一個3D的立方體放進去AR空間內</h2>
      
        <div><h3>上課方式</h3>
          <p>
           
          </p>
        </div>
           
      </section>
      <section  id="no1"><h2 >偵測一張圖，當偵測到圖，就顯示一個預設的AR模型</h2>
      
        <div><h3>上課方式</h3>
          <p>
           
          </p>
        </div>
           
      </section>
        
      <h1><a href="#menu-toggle" id="menu-toggle"><img src="Bankicons_Set-13-512.png" width="64" height="64"></a>iOS的照相功能與AR</h1>
      <p>這個單元介紹iOS的照相功能和ARKIT</p>
      <p>照相功能分成1 自相機取得影像放入imageview；2 自相簿取得影像放入imageview；3 從imageview把影像存入相簿</p>
      <p>而iOS的AR是使用ARkit終劇完成，1 把一個3D的立方體放進去AR空間內；2 偵測一張圖，當偵測到圖，就顯是一個預設的AR模型
      </p>
      <p>&nbsp;</p>
      <hr />
      <ol>
      <li><a href="#no1">自相機取得影像放入imageview</a></li>
      <li><a href="#no2">自相簿取得影像放入imageview</a></li>
      <li><a href="#no3">從imageview把影像存入相簿</a></li>
      <li><a href="#no4">把一個3D的立方體放進去AR空間內</a></li>
      <li><a href="#no5">偵測一張圖，當偵測到圖，就顯示一個預設的AR模型</a></li>
      </ol>
      <hr>
      <h1 id="no1">自相機取得影像放入imageview </h1>
      <img src="images/no1.png" alt="">
      <p>下面是拍照的控制步驟，其中1和2是編輯.plist文件,添加兩個key-value，打開相機和相冊的存取權限</p>
      <p><img src="images/no1.png" alt=""></p>
      <ol>
      <li> 申請相機許可權：</li>
      <key>NSCameraUsageDescription</key><string>This app will use camera </string>
      <li>申請相冊許可權</li>
      <key>NSPhotoLibraryUsageDescription</key><string> You can select photos to attach to reports.</string>
      <li>拉一個imageview元件到一個viewController，取名為imagePicked</li>
      <li>控制項繼承下面兩個協定UINavigationControllerDelegate ，UIImagePickerControllerDelegate </li>
      實現方法：class yourController:..., UINavigationControllerDelegate, UIImagePickerControllerDelegate  <br>{...  }<br>
      imagePicker在拍完照片之後，會啟動imagePickerController這個程式，把照片帶過去，並且停止相機，<br>
      所以必須要加這個協定，imagePicker才能指定delegate到這個類別。
      <li>宣告一個成員變數為相機控制項</li>
      var imagePicker = UIImagePickerController()
      <li>指定imagepicker的delegate為自己本身類別</li>
      在viewdidload加入imagePicker.delegate = self
      <li>加一個拍照按鈕，用來啟動相機</li>
      做一個按鈕的IBAction，當按下按鈕時執行下面程式，啟動相機<br>
      @IBAction func openCameraButton (_ sender: UIButton) <br>                 
      <span class=r2">imagePicker.sourceType = .camera   <br>   </span>
      <span class=r2">present(imagePicker, animated: true, completion: nil)  <br></span>
      }
      <li>拍照之後利用imagePickerController取回照片 </li>
      在imagepicker取得影像後，會執行下列函式，<br>
      停止相機<br>
      自info取出image放入imageview<br>
      private func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject]) {<br>
              imagePicker.dismiss(animated: true, completion: nil)<br>
              imagePicked.image = info[UIImagePickerControllerOriginalImage] as? UIImage<br>
      }
      
      
      </ol>
      <hr>
      <h1 id="no2">自相簿取得影像放入imageview </h1>
      <p>影像從相機來和從相簿來是一樣的動作，只是來源不同，所以步驟和前面使用相機的步驟一樣，只差</p>
      <p>imagePicker.sourceType = .camera 來源是相機.camera </p>
      <p>imagePicker.sourceType = .photoLibrary  來源是相簿 .photoLibrary</p>
      <p>所以只需要再加上一個按鈕，按下來啟動相簿，如下 </p>
      <p>
      @IBAction func openPhotoLibraryButton (_ sender: UIButton) {  <br>                 
      imagePicker.sourceType = .photoLibrary     <br> 
      present(imagePicker, animated: true, completion: nil) <br>    }<br> 
      </p>
      
      
      <hr>
      <h1 id="no3">從imageview把影像存入相簿 </h1>
      <p>
      做一個按鈕的IBAction<br>
      @IBAction func saveButt(_ sender: Any) {<br>
              var imageData = UIImageJPEGRepresentation(imagePicked.image!, 0.6)<br>
              var compressedJPGImage = UIImage(data: imageData!)<br>
              UIImageWriteToSavedPhotosAlbum(compressedJPGImage!, nil, nil, nil)<br>
              
      }<br>
      
      先將imageview的image做0.6倍的壓縮，再轉回UIImage存入相簿<br>
      
      </p>
      <hr>
      <h1 id="no4">把一個3D的立方體放進去AR空間內</h1>
      <p>這段會建立一個應用，當手指點一下，會在點的地方，放一個3D的立方體進去AR空間內</p>
      <p>再點一下，那個方塊就會消失 </p>
      <ol>
      <li>開一個singleview controller</li>
      <li>因為會用相機，所以必須請求允許相機使用權限</li>
      <p align="left">&lt;key&gt;NSCameraUsageDescription&lt;/key&gt; <br>
        &lt;string&gt;for ar&lt;/string&gt; <br>
        &lt;key&gt;UISupportedInterfaceOrientations~ipad&lt;/key&gt; </p>
      <li>打開Storyboard，將 ARKit SceneKit View拖拉至你的View Controller，並拉滿。 </li>
      <li>使用ARKit  </li>
      1 import ARKit<br>
      2 建立ARKit SceneKit View的IBOutlet<br>
      @IBOutlet weak var arr: ARSCNView!
      <li>啟動、停止ＡＲview</li>
      <p align="left">override func viewWillAppear(_ animated: Bool) { <br>
        super.viewWillAppear(animated) <br>
        </p>
      <p align="left">let configuration = ARWorldTrackingConfiguration() <br>
        arr.session.run(configuration) <br>
        <br>
        }<br>
        &ldquo;World tracking可提供裝置上六個自由度軌跡，來找到場景所需的&rdquo;特徵點&rdquo;(featurepoint)，</p>
      <p align="left">world tracking也會啟用performing hit-tests against the frame. <br>
        最後一段程式碼，AR Session主要是管理動作追踨與相機影像處理內容。我們啟動session去執行設定好的configuration。<br>
        </p>
      <p align="left">&nbsp;</p>
      <p align="left">當這個Session暫停後，Tracking將不會再執行。</p>
      <p align="left">在viewWillDisappear(_:)方法中，我們主要做的是當view在關閉時，設定AR單元就會同時停止追踨動作與處理圖像內容。 </p>
      <p align="left">override func  viewWillDisappear(_ animated: Bool) { <br>
        <br>
        super.viewWillDisappear(animated) <br>
        arr.session.pause() <br>
        <br>
        }</p>
      <li>加入一個增加方塊的方法 </li>
        func addBox(x: Float = 0, y: Float = 0, z: Float = -0.2) { <br>
        <br>
        let box = SCNBox(width: 0.1,  height: 0.1, length: 0.1, chamferRadius: 0)//產生一個ＡＲＢＯＸ <br>
        <br>
        let boxNode = SCNNode()//產生一個節點 <br>
        boxNode.geometry = box//把box加入節點 <br>
        boxNode.position = SCNVector3(x, y, z)//指定節點座標 <br>
        <br>
        arr.scene.rootNode.addChildNode(boxNode)//把節點變成根節點的子節點 <br>
        <br>
        }<p></p>
        <p>在AR的空間中，所有的虛擬物件都是畫出來的，所以必須要有一個資料結構，來存放所有的AR物件，</p>
        <p>在這邊就有點像是一個TREE，arr.scene.rootNode就是這tree的根節點，從這個根節點去造訪所有的節點，</p>
        <p>然後把每一個節點畫在空間中</p>
        <p>這個程式先建立一個長寬高都是0.1的方塊 </p>
        <p><img src="https://docs-assets.developer.apple.com/published/97ce9945db/bc7d03c9-dd00-4bbf-9cc6-ff21754832d5.png"></p>
        <p>然後建立一個節點，把方塊塞進去這個節點，並且設定這個節點的座標</p>
        <p>然後把這個節點加成根節點的子節點</p>
        <p>，所以從根節點進行造訪，當造訪到這個節點就會在這個座標畫這個方塊</p>
        <p></p>
        <li>建立點一下的手勢處理程式</li>
        <p>拉一個手勢tap到ARscene上 <br>
          建立tap的ＩＢＡction<br>
          @IBAction func tap1(_ sender: UITapGestureRecognizer) { <br>
          let tapLocation:CGPoint = sender.location(ofTouch: 0, in:  sender.view)<br>
          //抓取tap座標 <br>
          let hitTestResults =  arr.hitTest(tapLocation)<br>
          //抓取tap座標上所有ＡＲ物件，放入陣列傳回 <br>
          //如果hitTestResults.first 有物件，執行標號2，沒有則執行標號1 <br>
          guard let node =  hitTestResults.first?.node else {//標號1產生cube <br>
          let  hitTestResultsWithFeaturePoints = arr.hitTest(tapLocation, types: .featurePoint)//抓出tap座標所在的實體物件 <br>
          if let  hitTestResultWithFeaturePoints = hitTestResultsWithFeaturePoints.first {//如果有抓到實體物件，取出它的世界座標 <br>
          let translation =  hitTestResultWithFeaturePoints.worldTransform.translation <br>
          addBox(x: translation.x, y: translation.y, z: translation.z) <br>
          //在實體物件座標上加入box <br>
          } <br>
          return <br>
          } <br>
          node.removeFromParentNode()//標號2去除cube <br>
          }</p>
      <p></p>
        <p></p>
      <p align="left">&nbsp;</p>
      </ol>
      <hr>
      <h1 id="no5">偵測一張圖，當偵測到圖，就顯示一個預設的AR模型 </h1>
      <ol>
        <li>新增viewcontorler專案，放ＡＲsceneview。 </li>
        <li>拉iboutlat,變數名稱為sceneView。 </li>
        <li>import SceneKit<br>
          import ARKit </li>
        <li>在plist開放相機權限 </li>
      
      <p align="left">&lt;key&gt;NSCameraUsageDescription&lt;/key&gt;<br>
        &lt;string&gt;This application will use the  camera for Augmented Reality.&lt;/string&gt;</p>
      <p>5在專案資料夾點右鍵newfile ，點選SceneKit Catalog,建立abbb.scnassets,在裡面放入scn檔案， </p>
      <p>&nbsp;</p>
      <p>6在Assets.xcassets中點右鍵選取New  AR Resourse Group,命名為Photos把要辨識的圖片放入並給予尺寸</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <ul>
        <li>加入ARsceneview的delegate<br>
          class  ViewController: UIViewController, ARSCNViewDelegate { </li>
        <li>在viewdidload中指定剛才的sceneView的delegate</li>
      </ul>
      <p align="left">@IBOutlet weak var sceneView: ARSCNView! <br>
        override func viewDidLoad() { <br>
        super.viewDidLoad() <br>
        sceneView.delegate = self <br>
        } </p>
      <ul>
        <li>啟動ＡＲsceneview</li>
      </ul>
      <p align="left">override func viewWillAppear(_ animated: Bool) { <br>
        super.viewWillAppear(animated) <br>
        //建立一個configuration <br>
        let configuration = ARImageTrackingConfiguration()</p>
      <p align="left">        //抓取要辨識的影像 <br>
        //guard如果不成功就會執行else <br>
        guard let trackedImages = ARReferenceImage.referenceImages(inGroupNamed:  &quot;Photos&quot;, bundle: Bundle.main) else { <br>
        print(&quot;No images available&quot;) <br>
        return <br>
        }</p>
      <p align="left">        //把要辨識的影像指定入configuration,並且指定最多同時辨識的影像 <br>
        configuration.trackingImages = trackedImages <br>
        configuration.maximumNumberOfTrackedImages = 2</p>
      <p align="left">                //啟動ＡＲ <br>
        sceneView.session.run(configuration) <br>
        } </p>
      <ul>
        <li>離開view時，暫停ＡＲ功能 </li>
      </ul>
      <p align="left">override func viewWillDisappear(_  animated: Bool) {<br>
        super.viewWillDisappear(animated)<br>
        <br>
        // 暫停 view's session<br>
        sceneView.session.pause()<br>
        }</p>
      <ul>
        <li>renderder是由ARSCNViewDelegate帶來的，偵測到影像時啟動 </li>
      </ul>
      <p align="left">啟動後加入ＡＲ物件，產生nodeàplaneNodeàshipNode<br>
        anchor會帶來所偵測到影像的資訊，例如大小及位置 </p>
      <p align="left">func renderer(_ renderer:  SCNSceneRenderer, nodeFor anchor:  ARAnchor) -&gt; SCNNode? {<br>
        //宣告node<br>
        let node = SCNNode()</p>
      <p align="left">         //設定與影像相同大小的plane,並著色 <br>
        if let imageAnchor = anchor as? ARImageAnchor {<br>
        let plane = SCNPlane(width:  imageAnchor.referenceImage.physicalSize.width, height:  imageAnchor.referenceImage.physicalSize.height)<br>
        <br>
        plane.firstMaterial?.diffuse.contents = UIColor(white: 0.5, alpha: 0.9)</p>
      <p align="left">             //根據plane來建planeNode,並設定位置 <br>
        let planeNode = SCNNode(geometry: plane)<br>
        planeNode.eulerAngles.x = -.pi / 2<br>
        <br>
        //讀取ＡＲ物件 <br>
        let shipScene = SCNScene(named: &quot;abbb.scnassets/ship.scn&quot;)!<br>
        <br>
        //將ＡＲ物件的node放入shipNode,並設定位置 <br>
        let shipNode = shipScene.rootNode.childNodes.first!<br>
        shipNode.position = SCNVector3Zero<br>
        shipNode.position.z = 0.15<br>
        <br>
        //把shipNode設為planeNode的ChildNode<br>
        planeNode.addChildNode(shipNode)<br>
        //把planeNode設為node的ChildNode<br>
        node.addChildNode(planeNode)<br>
        <br>
        }<br>
        <br>
        return node<br>
        <br>
        }</p>
        </ol>

    
    </div>
 
    
  </div>  
<!--footer *****************************************************************************************************************footer  -->
    
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery-3.4.1.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap-4.4.1.js"></script>
</body>
</html>
