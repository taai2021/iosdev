<!DOCTYPE html>
<html lang="en"> 
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
    <title>行動商務與系統發展</title> 
    <link href="css/bootstrap-4.4.1.css" rel="stylesheet">
    <link rel=stylesheet type="text/css" href="css/style.css">
    <!--script src="js/custom.js"></script>-->
  </head>
<body>

<!--navigation **************************************************************************************************** navigation -->
<div >
  <nav id="van" class="navbar navbar-expand-lg navbar-dark nav-nobg fixed-top" role="navigation" >
   
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul style="margin-left: 50px;" class="navbar-nav mr-auto navbar-left">
        <li class="nav-item dropdown"><!-- ch1 -->
          <a class="nav-link dropdown-toggle nav-nobg" href="../Lt1/ch1.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true"  aria-expanded="false" style="border-radius: 20px; color: orangered;">
          1</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt1/ch1.html">第1章 簡介</a>  
            <a class="dropdown-item" href="../Lt1/ch1.html#no1">上課相關規定</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no2">1.開發 iOS APP 需要準備什麼?</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no3">2 MAC作業系統基本操作</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no4">3 建立APPLE ID，使用自己的APPLE ID建立MAC帳號和環境</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no5">4 練習去Apple store安裝壓縮軟體</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no6">5 熟悉Xcode環境簡介</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no7">6 使用模擬器嘗試hello程式</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no8">7.學習SwiftUI還是UIKit?</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#no9">8 把剛剛建立帳號和環境移除</a>
            <a class="dropdown-item" href="../Lt1/ch1.html#noa">9 問題和練習</a>
            
          </div>
        </li>
        <li class="nav-item dropdown"><!-- CFP -->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          2</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt2/ch2.html">第2章 Swift快跑</a>             
            <a class="dropdown-item" href="../Lt2/ch2.html#no1">1. 基本語法</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no2">2. tuples</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no3">3. optionals</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no4">4. 條件式和迴圈</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no5">5. Function</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no6">6. 類別</a>
            <a class="dropdown-item" href="../Lt2/ch2.html#no7">7. 閉包</a>
          </div>
        </li>
        
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          3</a>              
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt3/ch3.html">第3章 app基礎練習</a>         
            <a class="dropdown-item" href="../Lt3/ch3.html#no1">1. 熟悉XCODE各個面板部位和操作</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no2">2. 視覺元件和程式的連結</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no3">3. 使用constraints固定元件的位置和大小</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no4">4. 設定APP開啟畫面</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no5">5. APP的ICON設定</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no6">6. 隱藏狀態欄</a>
            <a class="dropdown-item" href="../Lt3/ch3.html#no7">7. 習題</a>
          </div>
        </li>

        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          4</a>               
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt4/ch4.html">第4章 Tableview元件的使用</a>      
            <a class="dropdown-item" href="../Lt4/ch4.html#no1">1. 新增viewcontroller及其類別並建立連結</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no2">2. 如何設定app開啟時的第一個view?</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no3">3. UITableView和UITableviewController</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no4">4. UITableView結構介紹</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no5">5. Delegate和DataSource是甚麼?</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no6">6. 如何將UITableView連結到UITableViewDelegate和UITableViewDataSource?</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no7">7. 什麼是Prototype cell?</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no8">8. Tableiew-cell-style設定成basic和custom有什麼區別?</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no9">9. 建立一個style=basic的tableview小練習</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no10">10. 建立一個style=custom的tableview小練習</a>
            <a class="dropdown-item" href="../Lt4/ch4.html#no11">11. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          5</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt5/ch5.html#no0">第5章 UITableview Controller的使用</a>  
            <a class="dropdown-item" href="../Lt5/ch5.html#no1">1. 準備好UITableviewcontroller，設定起始頁面</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no2">2. 建立一段程式碼，然後和UITableviewcontroller產生關聯</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no3">3. 為自訂cell建立類別並且和自訂cell產生關聯</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no4">4. 設定cell</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no5">5. 在CustomTableViewCell類別建立自訂元件的變數</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no6">6. 提供資料來源給自訂的CustomTableViewCell</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no7">7. 讓cell的影像由方形變成圓形</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no8">8. Label如何摺行</a>
            <a class="dropdown-item" href="../Lt5/ch5.html#no9">9. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          6</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt6/ch6.html">第6章 UITableview的事件處理</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no1">1. UI<span style="color: red;">TableView</span>DataSource和UI<span style="color: red;">TableView</span>Delegate的再解釋</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no2">2. 點選事件-使用UI<span style="color: red;">Alert</span>Controller進行互動</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no3">3. 點選事件-使用閉包來處理UI<span style="color: red;">Alert</span>Action</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no4">4. 點選事件-使用UI<span style="color: red;">TableViewCell</span>Accessory來標示cell</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no5">5. 滑動事件-使用<span style="color: red;">editingStyle</span>方法幫tableview建立刪除功能</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no6">6. 滑動事件-使用<span style="color: red;">editActions</span>方法幫tableview建立自訂功能</a>
            <a class="dropdown-item" href="../Lt6/ch6.html#no7">7. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle  nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          7</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt7/ch7.html">第7章 頁面轉移(segue)與Apple Map</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no1">1. 一點物件導向概念</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no2">2. 使用segue轉移頁面的概念</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no3">3. 使用prepare方法來傳送資料</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no4">4. 按鈕發動的segue和view發動的segue</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no5">5. show和 Present modally的區別</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no6">6. 地圖的使用</a>
            <a class="dropdown-item" href="../Lt7/ch7.html#no7">7. 習題</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          8</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt8/ch8.html">第8章 會員認證機制與Gesture</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no1">1. 樣板Tabbar的使用</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no2">2 練習：登入&登出</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no3">3 練習-實現自動登入</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no4">4 作業</a>
            <a class="dropdown-item" href="../Lt8/ch8.html#no5">5 補充資料 iOS常用的手勢</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          9</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt9/ch9.html">第9章 使用JSON格式讀取伺服器資料</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          10<a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt10/ch10.html">第10章 CocoaPods & Firebase的使用</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          11</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt11/ch11.html">第11章 使用UIImagePickerController拍照和相簿存取</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          12</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt12/ch12.html"> 第12章 擴增專案功能，讓會員可以拍照上傳以及評論</a>
          </div>
        </li>
        <li class="nav-item dropdown"><!-- Registration-->
          <a class="nav-link dropdown-toggle nav-nobg" href="calls.html" id="navbarDropdown" 
          data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="border-radius: 20px; color: orangered;">
          13</a>            
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="../Lt13/ch13.html">第13章 統整專案，進行優化，開放會員新增餐廳</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>
  <p style=" position: fixed; top: 0; right: 0;z-index: 5000; color:chocolate;margin-right: 5px;  border-radius: 5px;
  padding: 0px 3px;">
  第6章 UITableview的事件處理
</p>
  <p style=" font-size:0.8em; position: fixed; bottom: 0; right: 0;z-index: 5000; color:white;
  font-weight: bold;margin-right: 5px; background-color: chocolate; border-radius: 5px;
  padding: 0px 3px;"><a style="color: aliceblue; font-size: 1.5em; " href="../index.html">回首頁</a></p>
</div>
  
<!--below is the content**************************************************************************************below is the content -->
  <div  style="margin-top: 80px;">
     
    <div style="margin: auto; width: 96%; text-align: left; border-bottom: 1px solid darkgrey; "> 
      <section  id="no1">
        <h2 >1.  UI<span style="color: red;">TableView</span>DataSource  和UI<span style="color: red;">TableView</span>Delegate的再解釋</h2>
        <p>TableView需要兩樣東西資料和控制，也就是裡面放甚麼資料，刪除cell之類的控制動作，這兩項都需要程式碼<br>
          例如我需要拿資料塞到cell裡面，我就去呼叫<span style="color: red;">《cell for row》</span>這個程式，他就會塞好資料到你指定的cell裡面。<br>
          所以TableView會需要知道這些程式在哪邊，所以TableView必須指定到底是哪一個類別裡面是
          我的
          <span style="color: red;">《</span>UI<span style="color: red;">TableView</span>DataSource<span style="color: red;">》</span>
          和
          <span style="color: red;">《</span>UI<span style="color: red;">TableView</span>Delegate<span style="color: red;">》</span>。<br>
          
          
          然後我們就在該類別針對需要的部分，進行程式設計。<br>
          
          目前和
          <span style="color: red;">《</span>UI<span style="color: red;">TableView</span>DataSource<span style="color: red;">》</span>
          有關，而且也是加了協定後，該類別一定要有的方法是下面3個：
          
          <ol>
            <li><span style="color: red;">《</span>number of <span style="color: red;">section》</span>，表格可以分成幾個section</li>
            <li><span style="color: red;">《</span>number of <span style="color: red;">row》</span> 要顯示幾個row </li>
            <li><span style="color: red;">《cell for row》</span>放進去每個cell的資料</li>
          </ol>
        </p>
        <p>
          接下來這個單元要介紹的是
          <ol>
            <li>點選事件的方法</li>
            例如點了臉書的其中一個動態消息，秀出該動態消息的完整訊息，
            包括 <span style="color: red;">《</span>
            will<span style="color: red;">Select</span>Row<span style="color: red;">》</span>
            方法
            和 <span style="color: red;">《</span>
            did<span style="color: red;">Select</span>Row<span style="color: red;">》</span>
            方法
            <li>
              <span style="color: red;">《</span>
              UI<span style="color: red;">Alert</span>Controller
              <span style="color: red;">》</span>
            </li>也就是對話框，例如彈出一個對話框，問你是否確定刪除。
            <li>閉包的寫法</li>這邊拿來用在對話框的回應處理，例如問你是否確定刪除，確定就閉包內刪除掉。
            <li>
              <span style="color: red;">《</span>
              UI<span style="color: red;">TableViewCell</span>Accessory
              <span style="color: red;">》</span>
            </li>你應該看過cell最右邊有個>，表示這個cell可以點下去展開看更詳細的內容，這個就是輔助視圖(accessory view)
            <li>兩種滑動事件的方法</li>
            <span style="color: red;">editingStyle</span>方法和<span style="color: red;">editActions</span>方法
            
          </ol>
        </p>

      </section>
      <section id="no2"><h2>2. 點選事件-使用UI<span style="color: red;">Alert</span>Controller進行互動</h2>
        <div><h3> cell的點選事件方法</h3>
          tableView的cell的點選事件處理，有兩個方法
          <ol>
            <li><span style="color: red;">《</span>
              will<span style="color: red;">Select</span>Row<span style="color: red;">》</span>
              方法
            </li>
              tableView(----,willSelectRowAt:.....) 在<span style="color: red;">點選之前</span>會執行這個方法，可以做為篩選之用，設條件阻止某些cell不被選取

            <li><span style="color: red;">《</span>
              did<span style="color: red;">Select</span>Row<span style="color: red;">》</span>
              方法
            </li>
            tableView(----,didSelectRowAt:.....)在<span style="color: red;">點選之後</span>會執行這個方法，
          </ol>
          <p>            
            這個單元要利用上一個單元作好的表格，加上點選動作，再點選完後，秀出選單<br>
            記住一下目前資料來源有講過3個程式，加上目前的點選控制兩個willSelectRow和didSelectRow<br>
            已經五個了記清楚
          </p>
        </div>
        <div><h3>override → 覆寫《 didSelectRow 》方法 </h3>           
          <P>
            我們一開始是不是建立了一個繼承UITableViewController的子類別，而且我們正在使用它?<br>
            <img src="images/n03.png" alt="">

            UITableViewController本身就有tableView，所以當然tableView所有該有的DataSource和Deledate方法都是這個類別的成員方法，<br>
            我們正在用的既然是UITableViewController的子類別，當然有繼承到這些方法，<br>
            那麼我們希望在這些方法裡面加上程式碼，就必須<br>
            再寫一個同名的方法，裡面寫上我們客製化的程式碼，然後覆寫掉所繼承到的方法<br>
            覆寫的英文就是override，所以我們在func前面加上override
          </P>
          <P>不要複製貼上，要善用選單， 輸入override func tableView就會有選單，找 
            <span style="color: red;">《</span>
              did<span style="color: red;">Select</span>Row<span style="color: red;">》</span>
              方法，
          </P>     
            <img  src="images/n01.png" alt="" />
           <p><h4>override func tableViewDidEndMultipleSelectionInteraction(_ tableView: UITableView) {</h4>
              應該可以看出來這個方法沒有傳回值。
           </p>

        </div>
        <div><h3>在didSelectRow中加入 alert 對話框  </h3>  
          <p>alert有兩種形式，如下</p>
          <img src="images/n02.png" alt=""><br><br>
          <P>先認識兩個元件
            <ul>
              <li><button>UIAlert<span style="color: red;">Controller</span></button></li>
              <p>你可以把他想成對話框的整個框架，所以光只有他，就是有的對話框，上面會有訊息，可是沒有任何按鈕可以點選，例如《確定》和《取消》</p>
              <li><button>UIAlert<span style="color: red;">Action</span></button></li>
              <p>還記得我們要拉一個到類別時要選擇《Action》所以在類別中產生《IBAction》的方法當作按下按鈕之後的事件處理方法</p>
              <p>這個Alert<span style="color: red;">Action</span>也是一種button，但是專門用在a;ert對話框之中</p>
            </ul>
            <p>所以我們要建立並且顯示對話框需要基本的4個步驟
                <ol>
                  <li>建立Alert<span style="color: red;">Controller</span></li>
                  <li>建立Alert<span style="color: red;">Action</span>，然後在裡面加上按下按鈕後要執行的程式碼</li>
                  <li>把Alert<span style="color: red;">Action</span>塞進去Alert<span style="color: red;">Controller</span></li>
                  <li>顯示Alert<span style="color: red;">Controller</span></li>
                </ol>
                上面這樣 1 <button> 2 3 </button> 4的步驟，你就產生了一個上面有一顆按鈕的對話框，<br>
                如果希望對話框上面有兩顆按鈕，那就是 1 <button> 2 3 </button>  <button> 2 3 </button> 4<br>
                三顆按鈕就是 1 <button> 2 3 </button>  <button> 2 3 </button>  <button> 2 3 </button> 4 ，以此類推。
                
                <h4> 下面是完整程式碼(不要複製貼上，不然就白上課了。)</h4>
<XMP style="background-color: black;color: white;">
  override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
    let optionMenu=UIAlertController(title: nil, message: "你要執行什麼功能？", preferredStyle:.actionSheet )
    let alertAction=UIAlertAction(title: "取消", style: .cancel, handler: nil)
    optionMenu.addAction(alertAction)
    self.present(optionMenu, animated: true, completion: nil)
     
  }
  </XMP>
  
  <P>解說如下</P>
            </p>
                <div style="margin: 20px 0;">
                  <h4> 1 建立Alert<span style="color: red;">Controller</span><br></h4>
                  <h4>let <span style="color: red;">optionMenu</span> = UIAlertController(title: nil, message: "What do you want to do?", preferredStyle: .actionSheet)</h4>
                    title: nil → 對話框沒有標題<br>
                    message: "你想執行什麼功能?"  → 對話框上面的訊息是 你想執行什麼功能?<br>
                    preferredStyle: .actionSheet  → 對話框有兩種形式，如上圖所示。.actionSheet 是上圖右，出現在手機畫面最下方，.alert 是上圖左出現在手機畫面正中央<br>      
                </div>
                <div style="margin: 20px 0;">
                  <h4>2 建立Alert<span style="color: red;">Action</span>，然後在裡面加上按下按鈕後要執行的程式碼</h4>
                  <h4>let <span style="color: red;">cancelAction</span> = UIAlertAction(title: "取消", style: .cancel, handler: nil)</h4>
                  title: "取消"  → 這個按鈕上面顯示"取消" <br>
                  style: .cancel,  → 按鈕形態是 《 .cancel 專門用在取消功能》， 常用的另一種形態是 《.default 一般按鈕使用》<br>
                  handler: nil  →  handle是處理，handler是處理者，意思是按下按鈕之後要執行的程式碼放這邊，通常是以閉包形式撰寫，取消就甚麼都不做，所以給nil。<br>
                </div>
                <div style="margin: 20px 0;">
                  <h4>3 把Alert<span style="color: red;">Action</span>塞進去Alert<span style="color: red;">Controller</span></h4>
                  <h4><span style="color: red;">optionMenu</span>.addAction(<span style="color: red;">cancelAction</span>)</h4>
                </div>
                <div style="margin: 20px 0;">
                  <h4>4 顯示Alert<span style="color: red;">Controller</span></h4>
                  <h4>self.present(optionMenu, animated: true, completion: nil)</h4>
                  self.present  → 這個tableViewController的類別，在app啟動後，就變成一個物件，想要存取成員變數或成員方法可以使用《self.》而present中文意思是展現  <br>
                  optionMenu  → 要展現的元件 <br>
                  animated: true  → 要加上動畫效果 <br>
                  completion: nil  → 對話框結束後，是一個事件，這邊也是可以加上閉包，把對話框結束後要執行的程式碼放進去。 <br>
                </div>
                
              <P>執行畫面如下</P>
              <img src="images/n04.png" alt="">
                
        </div>
        <div><h3> 取消點選 </h3>
          <p>剛才點選了某一個Row，會一直保持被點選狀態，這樣或許會誤動作，最好記得取消點選。</p>
          <p> tableView.deselectRow(at: indexPath, animated: true)</p>
          <p>下面是目前完整的程式畫面</p>
          <img src="images/n05.png" alt="" />
        </div>  
      </section>
      <section id="no3"><h2>3. 點選事件-使用閉包來處理UI<span style="color: red;">Alert</span>Action</a></h2>
        <div><h3>多加上一顆按鈕可以撥打電話給餐廳</h3>
            <p>因為之前已經1234了這邊要多加兩個alertAction，所以只需要23的步驟，也就是2.建立alertAction，3.把alertAction加到alert<br>
              這兩個alertAction的handler都會加入程式碼來做出相對應的動作。<br>        
              我們要加的alertaction是 打電話給餐廳</p>
            
            <div style="margin: 20px 0;">
              <h4>2 建立Alert<span style="color: red;">Action</span>，然後在裡面加上按下按鈕後要執行的程式碼</h4>
              <h4>let <span style="color: red;">callAction</span> = UIAlertAction(title: "致電餐廳", style: .default, handler: nil)</h4>
              title: "致電餐廳"  → 這個按鈕上面顯示"致電餐廳" <br>
              style: .default,  →  《 .cancel 專門用在取消功能》 《.default 一般按鈕使用》<br>
              handler: nil  →  等等再加上閉包，先給nil。<br>
            </div>
            <div style="margin: 20px 0;">
              <h4>3 把Alert<span style="color: red;">Action</span>塞進去Alert<span style="color: red;">Controller</span></h4>
              <h4><span style="color: red;">optionMenu</span>.addAction(<span style="color: red;">callAction</span>)</h4>
            </div>
            <img src="images/n06.png" alt="">
        </div>
        <div><h3>使用閉包做事件處理 </h3>
          <p>剛才做好的致電餐廳-<span style="color: red;">callAction</span>，並沒有加入handler，
            所以不會有動作。但是模擬器也不能打電話，所以把實際打電話的程式碼改成出現另外一個alert,通知使用者不能打電話。
          </p>
          <p>handler的部分要使用閉包來寫，有兩種寫的方式
            <ol>
              <li>閉包指定給一個變數</li>
              let<span style="color: red;"> x={閉包}</span><br>
              let callAction = UIAlertAction(title: "致電餐廳", style: .default, handler: <span style="color: red;">x</span> )
              <li>閉包直接放進去</li>
              let callAction = UIAlertAction(title: "致電餐廳", style: .default, handler:<span style="color: red;">{閉包} </span>)
            </ol>

          </p>
          <p>
            這邊先使用第一種閉包的寫法，整個寫法如下<br>
            <XMP style="background-color: black;color: white;">
let callActionHandler = {
                          (輸入的參數) -> 輸出的參數 in
                          所有的程式碼都在這邊
                          .........
                          ......

                        }
            </XMP>
            和一般方法相比，一樣有輸入 輸出參數，但是沒有方法名稱<br>
            下面我們要寫一個閉包做出另一個alert(他的 preferredStyle: .alert是alert和前面那個actionsheet不同)<br>
            這個alert會顯示《這個設備無法打電話，請稍後再試》<br>            
          </p>
          <h4> 下面是alert的完整程式碼(不要複製貼上，不然就白上課了。)</h4>
          <XMP style="background-color: black;color: white;">
(action:UIAlertAction!) -> Void in
let alertMessage = UIAlertController(title: "Service Unavailable", message: "Sorry, the call feature is not available yet. Please retry later.", preferredStyle: .alert)
alertMessage.addAction(UIAlertAction(title: "OK", style: .default, handler: nil))
self.present(alertMessage, animated: true, completion: nil)              
            </XMP>
          <P>解說如下</P>
            <div style="margin: 20px 0;">
                <h4>0 閉包的宣告</h4>
                <h4> (action:UIAlertAction!) -> Void in</h4>
                <p>
                  (action:UIAlertAction!) → 傳入值預設是:UIAlertAction
                </p>
                <p>
                  Void → 無傳回值
                </p>
            </div>
            <div style="margin: 20px 0;">
              <h4> 1 建立Alert<span style="color: red;">Controller</span><br></h4>
                <h4> 
                  let alertMessage = UIAlertController(title: "設備無法使用", message: "這個設備無法打電話，請稍後再試", preferredStyle: .alert)</h4>
                  <p>
                    alertMessage → 對話框名稱
                  </p>
                <p>
                  title: "設備無法使用" → 標題
                </p>
                <p>
                  message: "這個設備無法打電話，請稍後再試" → 警告訊息
                </p>
                <p>
                  preferredStyle: .alert → 對話框會出現在手機中央，.alertAction會出現在手機最下方
                </p>
            </div>
            <div>
              <h4>2 建立Alert<span style="color: red;">Action</span></h4>
                <h4>let OKAtcion=UIAlertAction(title: "OK", style: .default, handler: nil)</h4>
                <p>
                  OKAtcion → 按鈕名稱
                </p>
                <p>
                  title: "OK" → 按鈕上顯示OK
                </p>
                <p>
                  style: .default → 按鈕形態是一般的樣式， .cancel是取消按鈕專用樣式
                </p>
                <p>
                  handler: nil →  不做任何動作只是告知使用者不能打電話
                </p>
            </div>
            <div style="margin: 20px 0;">
              <h4>3 把Alert<span style="color: red;">Action</span>塞進去Alert<span style="color: red;">Controller</span></h4>
                <h4> alertMessage.addAction(OKAction</h4>
            </div>
            <div style="margin: 20px 0;">
              <h4>4 顯示Alert<span style="color: red;">Controller</span></h4>
                <h4> self.present(alertMessage, animated: true, completion: nil)</h4>
            </div>
            <h4>最後把閉包指定給一個變數callActionHandler</h4>
            <XMP style="background-color: black;color: white;">                
let callActionHandler = {
(action:UIAlertAction!) -> Void in
  let alertMessage = UIAlertController(title: "設備無法使用", message: "這個設備無法打電話，請稍後再試", preferredStyle: .alert)
  let OKAtcion=UIAlertAction(title: "OK", style: .default, handler: nil)
  alertMessage.addAction(OKAtcion)
  self.present(alertMessage, animated: true, completion: nil)

}
            </XMP>
            <p>，再把callActionHandler指定給剛才callAction的handler,如下</p>
            <img src="images/n07.png" alt="">

          </p>
        </div>  
      </section>
      <section id="no4"><h2>4. 點選事件-使用UI<span style="color: red;">TableViewCell</span>Accessory來標示cell</h2>
        <p>在這一段講義，是要利用cell Accessory輔助視圖，來讓使用者標註他去過的餐廳</p>
        <p>做法是再增加一顆按鈕，點擊後會在點選的cell加上打勾符號的輔助視圖，如果已經去過的cell，再次點選可以取消打勾。</p>
        <div><h3>什麼是輔助視圖? </h3>
        <p>輔助視圖分成4種，如下圖，使用方式是設定其cell.accessoryType，例如使用打勾符號，就設定cell.accessoryType= <span style="color: red;">.Checkmark</span><br>
          如果要把勾勾取消就cell.accessoryType= .none</p>
        <ol>
          <li>打勾符號 check mark--> UITableViewCellAccessoryType<span style="color: red;">.checkmark</span></li>
          <li>細節揭示按鈕 detail disclosure button --> UITableViewCellAccessoryType<span style="color: red;">.detailDisclosureButton</span></li>
          <li>揭示指示符號disclosure indicator--> UITableViewCellAccessoryType<span style="color: red;">.disclosureIndicator</span></li>
          <li>細節圖示 detailButton--> UITableViewCellAccessoryType<span style="color: red;">.detailButton</span></li>
        </ol>
        <img src="images/n08.png" alt="">
      </div>
<br>
        
        <div><h3>多加上一顆按鈕來標註使用者是否去過 </h3>
          <p>按鈕上顯示"標註去過這家餐廳"，因為做過兩次了其他部分自己想辦法(假設名稱為 visitedAction )。</p>
          <img src="images/n09.png" alt="">
        </div>
        <div><h3> 如何記錄使用者是否去過這家餐廳?</h3>
          <p>如果是真實的完成品應該視放在資料庫內，在開啟app時連其他資訊一起過來，所以應該是一個陣列而且長度要和《餐廳名稱》一樣</p>
          <p>所以加入一個布林陣列的成員變數來表示是否已經去過，下面是swift宣告一個預設值為false，長度為21的陣列宣告方式，把他和其他陣列放在一起</p>
          <p>var restaurantIsVisited = [Bool](repeating: false, count: 21)</p>
          
        </div>
        <div><h3> 如何讓cell的打勾或不打勾的狀態和restaurantIsVisited的true和false連結? </h3>
          <p>在《cell for row》方法中就是會根據索引值來設定cell內容<br>
            ，所以在裡面就根據索引值取得restaurantIsVisited，<br>
          再根據true或false來設定《cell.accessoryType= <span style="color: red;">.Checkmark</span>》或《cell.accessoryType= .none》</p>
          <XMP style="background-color: black;color: white;">
cell.accessoryType = self.restaurantIsVisited[indexPath.row] ? .checkmark : .none
          </XMP>
        </div>
        <div><h3>使用閉包幫visitedAction製作handler，點選後將restaurantIsVisited[選取row的indexPath.row ]的布林值反相</h3>
          <p>這邊使用第二種閉包寫法，直接放進去<br>
            let visitedAction = UIAlertAction(title: "標註去過這家餐廳", style: .default, handler:<span style="color: red;">{閉包} </span>)
          </p>
          <XMP style="background-color: black;color: white;">
{
  (action:UIAlertAction!) -> Void in
  self.restaurantIsVisited[indexPath.row] = !self.restaurantIsVisited[indexPath.row]
  self.tableView.reloadData() 
  
}
          </XMP>
          <p>self.tableView.reloadData() 可以讓表格重新載入資料</p>
          <p>可是這樣還是不夠好，因為visitedAction永遠顯示 "標註去過這家餐廳"，使用者會搞混，<br>
            所以最好當使用者沒去過，就顯示"標註去過這家餐廳"<br>
            如果已經去過則顯示"標註去過這家餐廳"</p>
            <p>因此<br>
              let visitedAction = UIAlertAction(title: "標註去過這家餐廳", style: .default, handler:<span style="color: red;">{閉包} </span>)<br>
            的title: "標註去過這家餐廳"該怎麼寫呢?你一定會的，我就不寫出了。</p>
            <img src="images/n10.png" alt="">
        </div>       
      </section>
      <section id="no5"><h2>5. 滑動事件-使用<span style="color: red;">editingStyle</span>方法幫tableview建立刪除功能</h2>
        在這邊繼續介紹tableview其他的控制程式，上一個單元是點選，這個單元是滑動<br>
        總共會介紹兩個程式 editingStyle和 editActions<br>
        先複習一下目前學到的<br>
        目前和資料來源有關的是<br>
        numberOfsections 有幾個sections固定給1<br>
        numberOfRows table有幾個row<br>
        cellForRow row裡面塞資料<br>
        和控制有關的<br>
        點選-didSelectRow<br>
        滑動 editingStyle和 editActions<br>
        上面的請回憶一下每個程式都在做甚麼的<br>
        editingStyle 這個不能自訂 只能刪除 但是使用方便<br>
        editActions 這個可以自訂功能 當然設定相對多一些<br>
        這一段講義將使用editingStyle來製作刪除餐廳的功能
        <div><h3> editingStyle 方法 </h3>
          <p>
            override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCellEditingStyle, forRowAt indexPath: IndexPath)<br>
          加入這個方法 在滑動時會出現delete按鈕<br>
          <img src="images/n11.png" alt="">
            </p>接下來實作刪除方法<br>
            indexPath會提供哪一筆cell的數字<br>
            利用removeAtIndex方法來刪除陣列的那一筆資料<br>
            當然要同時刪除所有陣列的資料包括 restaurantNames, restaurantImages, restaurantLocations, restaurantTypes, restaurantIsVisited<br>
            完整程式碼如下
            <XMP style="background-color: black;color: white;">      
override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCellEditingStyle, forRowAt indexPath: IndexPath) {
    self.restaurantNames.remove(at: indexPath.row)
    self.restaurantLocations.remove(at:indexPath.row)
    self.restaurantTypes.remove(at:indexPath.row)
    self.restaurantIsVisited.remove(at:indexPath.row)
    self.restaurantImages.remove(at:indexPath.row)
    self.tableView.reloadData()
    //self.tableView.deleteRows(at: [indexPath], with: .fade)
}
            </XMP>      
            先把陣列裡面的那一筆資料刪除<br>
            然後<br>
            重新載入UITableView<br>
            self.tableView.reloadData()<br>
            或者直接移除該行<br>
            self.tableView.deleteRows(at: [indexPath], with: .fade)<br>
            這兩種都可以
            </p>
        </div>   
      </section>

      <section id="no6"><h2>6. 滑動事件-使用<span style="color: red;">editActions</span>方法幫tableview建立自訂功能</h2>
        <div><h3>editActions</h3>
         <p>editActions滑動產生更多自訂動作<br>
          這個動作會蓋掉剛剛的commit editingStyle(只能刪除或者修改)<br>
          editActionsForRowAt可以自己定義要做的動作 
         </p> 
<XMP style="background-color: black;color: white;">
override func tableView(_ tableView: UITableView, editActionsForRowAt: IndexPath) -> [UITableViewRowAction]? {

    let shareAction = UITableViewRowAction(style: UITableViewRowActionStyle.default, title: "Share",
      handler:{
                (action:UITableViewRowAction, indexPath:IndexPath) -> Void in
                let shareMenu = UIAlertController(title: nil, message: "Share using", preferredStyle: .actionSheet)
                let twitterAction = UIAlertAction(title: "Twitter", style: UIAlertActionStyle.default, handler: nil)
                let facebookAction = UIAlertAction(title: "Facebook", style: UIAlertActionStyle.default, handler: nil)
                let emailAction = UIAlertAction(title: "Email", style: UIAlertActionStyle.default, handler: nil)
                let cancelAction = UIAlertAction(title: "Cancel", style: UIAlertActionStyle.cancel, handler: nil)
                shareMenu.addAction(twitterAction)
                shareMenu.addAction(facebookAction)
                shareMenu.addAction(emailAction)
                shareMenu.addAction(cancelAction)
                self.present(shareMenu, animated: true, completion: nil)
        }
    )

    let deleteAction = UITableViewRowAction(style: UITableViewRowActionStyle.default, title: "Delete",
      handler: {
                (action:UITableViewRowAction, indexPath:IndexPath) -> Void in
                self.restaurantNames.remove(at: indexPath.row)
                self.restaurantLocations.remove(at:indexPath.row)
                self.restaurantTypes.remove(at:indexPath.row)
                self.restaurantIsVisited.remove(at:indexPath.row)
                self.restaurantImages.remove(at:indexPath.row)
                self.tableView.deleteRows(at: [indexPath], with: .fade)
      }
    )
    shareAction.backgroundColor = UIColor(red: 255.0/255.0, green: 166.0/255.0, blue: 51.0/255.0, alpha: 1.0)
    deleteAction.backgroundColor = UIColor(red: 51.0/255.0, green: 51.0/255.0, blue: 51.0/255.0, alpha: 1.0)
    return [deleteAction, shareAction]
}
</XMP>


        </div>
      </section>
      <section id="no7"><h2>7. 習題</h2>
    
        <p>將前一章作業12星座作出下面修改</p>
        <ol>
          <li>點選顯示12星座本週運勢，運勢可以自己編或網路抓成字串變數，然後索引值亂數產生</li>
          <li>editActions做出1 share的按鈕(如上) 2 第2顆按鈕是like按鈕，表示喜歡這個星座</li>
          <li>修改下面Root View Controller 標題，並且在旁邊加上一顆按鈕clear清除所有的like</li>
          <img src="images/n12.png" alt="">
        </ol>
      </section>
    
    </div>
 
    
  </div>  
<!--footer *****************************************************************************************************************footer  -->
    
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery-3.4.1.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap-4.4.1.js"></script>
</body>
</html>
